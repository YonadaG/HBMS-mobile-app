  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (20.9ms)[0m  [1m[35mCREATE DATABASE "backend_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (2.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "bookings" CASCADE[0m
  [1m[35m (18.6ms)[0m  [1m[35mCREATE TABLE "bookings" ("id" bigserial primary key, "authorize_card" boolean DEFAULT FALSE, "check_in" date NOT NULL, "check_out" date NOT NULL, "confirmation" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "guest_count" integer NOT NULL, "guest_name" character varying NOT NULL, "price" decimal(10,2) NOT NULL, "room_id" bigint, "room_type_id" bigint NOT NULL, "status" character varying DEFAULT 'confirmed' NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_bookings_on_check_in_and_check_out" ON "bookings" ("check_in", "check_out")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_bookings_on_confirmation" ON "bookings" ("confirmation")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_bookings_on_room_id" ON "bookings" ("room_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_bookings_on_room_type_id" ON "bookings" ("room_type_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_bookings_on_status" ON "bookings" ("status")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_bookings_on_user_id" ON "bookings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "room_types" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "room_types" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text, "image" character varying, "max_guests" integer NOT NULL, "name" character varying NOT NULL, "price" decimal(10,2) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_room_types_on_name" ON "room_types" ("name")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "amenities" json DEFAULT '[]', "bed_type" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "floor_no" integer NOT NULL, "images" json DEFAULT '[]', "price_per_night" decimal(10,2) NOT NULL, "room_no" character varying NOT NULL, "room_type_id" bigint NOT NULL, "size" integer NOT NULL, "status" character varying DEFAULT 'available' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_rooms_on_room_no" ON "rooms" ("room_no")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_room_type_id" ON "rooms" ("room_type_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_status" ON "rooms" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "name" character varying NOT NULL, "password_digest" character varying NOT NULL, "role" character varying DEFAULT 'guest' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "bookings" ADD CONSTRAINT "fk_rails_dedb8e6580"
FOREIGN KEY ("room_type_id")
  REFERENCES "room_types" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "bookings" ADD CONSTRAINT "fk_rails_4fe21eabc6"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "bookings" ADD CONSTRAINT "fk_rails_ef0571f117"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "rooms" ADD CONSTRAINT "fk_rails_f4fff90e9d"
FOREIGN KEY ("room_type_id")
  REFERENCES "room_types" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20260204202157)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20260204202154),
(20260204202152),
(20260204201902);[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-02-04 20:37:16.767032', '2026-02-04 20:37:16.767034') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '67d45414742c2582a950d690fbde67849a29954e', '2026-02-04 20:37:16.768378', '2026-02-04 20:37:16.768379') RETURNING "key"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3087697479046693695)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3087697479046693695)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:37:21 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:21.517005"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:21.517005"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 30ms (Views: 0.1ms | ActiveRecord: 4.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:37:21 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:21.530675"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:21.530675"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:37:21 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 1605ms (Views: 0.1ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 175.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 4ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.148021"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.148021"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3ms (Views: 0.0ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3ms (Views: 0.0ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.163606"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.163606"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#login as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.170157"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.170157"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#login as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.176775"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.176775"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#login as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Completed 401 Unauthorized in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.181027"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.181027"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#login as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.188679"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.188679"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#me as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.195833"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.195833"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#me as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.200191"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.200191"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::AuthController#me as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.5ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.209068"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.209068"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.6ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.221479"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 1], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.221479"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.226840"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.226840"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "6UMFNMQ"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.6ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "6UMFNMQ"], ["created_at", "2026-02-04 20:37:23.232724"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 1], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.232724"], ["user_id", 11]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "LK9P6ED"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-04"], ["check_out", "2026-02-05"], ["confirmation", "LK9P6ED"], ["created_at", "2026-02-04 20:37:23.235395"], ["guest_count", 1], ["guest_name", "Jane"], ["price", "132.0"], ["room_id", nil], ["room_type_id", 1], ["status", "Checked In"], ["updated_at", "2026-02-04 20:37:23.235395"], ["user_id", 11]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings?status=confirmed" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#index as HTML
  Parameters: {"status"=>"confirmed"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."status" = $2[0m  [["user_id", 11], ["status", "confirmed"]]
  [1m[36mRoomType Load (0.3ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 1]]
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.3ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.252408"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.252408"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.253540"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 2], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.253540"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.256245"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.256245"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "O9YK1RQ"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "O9YK1RQ"], ["created_at", "2026-02-04 20:37:23.256931"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 2], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.256931"], ["user_id", 12]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "051JS2B"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-04"], ["check_out", "2026-02-05"], ["confirmation", "051JS2B"], ["created_at", "2026-02-04 20:37:23.258355"], ["guest_count", 1], ["guest_name", "Jane Smith"], ["price", "132.0"], ["room_id", nil], ["room_type_id", 2], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.258355"], ["user_id", 12]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings?search=John" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#index as HTML
  Parameters: {"search"=>"John"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mBooking Load (1.0ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND (guest_name ILIKE $2 OR confirmation ILIKE $3)[0m  [["user_id", 12], [nil, "%John%"], [nil, "%John%"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 2]]
Completed 200 OK in 2ms (Views: 0.0ms | ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.263708"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.263708"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.264656"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 3], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.264656"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.267352"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.267352"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "FNKGPGF"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "FNKGPGF"], ["created_at", "2026-02-04 20:37:23.268073"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 3], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.268073"], ["user_id", 13]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings?search=FNKGPGF" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#index as HTML
  Parameters: {"search"=>"FNKGPGF"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mBooking Load (0.1ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND (guest_name ILIKE $2 OR confirmation ILIKE $3)[0m  [["user_id", 13], [nil, "%FNKGPGF%"], [nil, "%FNKGPGF%"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 3]]
Completed 200 OK in 2ms (Views: 0.0ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.272664"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.272664"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.273714"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 4], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.273714"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.276480"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.276480"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "JPPNRYV"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "JPPNRYV"], ["created_at", "2026-02-04 20:37:23.277215"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 4], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.277215"], ["user_id", 14]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.280263"], ["email", "[FILTERED]"], ["name", "Other"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.280263"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "ZS0ZLU1"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-04"], ["check_out", "2026-02-05"], ["confirmation", "ZS0ZLU1"], ["created_at", "2026-02-04 20:37:23.281139"], ["guest_count", 1], ["guest_name", "Jane"], ["price", "132.0"], ["room_id", nil], ["room_type_id", 4], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.281139"], ["user_id", 15]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1[0m  [["user_id", 14]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 4]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.286868"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.286868"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.288020"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 5], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.288020"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.290899"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.290899"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "CEW7VBY"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "CEW7VBY"], ["created_at", "2026-02-04 20:37:23.291634"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 5], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.291634"], ["user_id", 16]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.294771"], ["email", "[FILTERED]"], ["name", "Other"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.294771"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "3FOBPX7"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-04"], ["check_out", "2026-02-05"], ["confirmation", "3FOBPX7"], ["created_at", "2026-02-04 20:37:23.295487"], ["guest_count", 1], ["guest_name", "Jane"], ["price", "132.0"], ["room_id", nil], ["room_type_id", 5], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.295487"], ["user_id", 17]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.298755"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.298755"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 16], ["id", 17]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 5]]
Completed 200 OK in 2ms (Views: 0.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.304201"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.304201"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.305187"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 6], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.305187"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.307897"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.307897"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "2ZPJQQD"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "2ZPJQQD"], ["created_at", "2026-02-04 20:37:23.308595"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 6], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.308595"], ["user_id", 19]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings/10" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#show as HTML
  Parameters: {"id"=>"10"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 19], ["id", 10], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.0ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.313082"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.313082"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.314254"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 7], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.314254"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.317018"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.317018"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "ENJIO7D"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "ENJIO7D"], ["created_at", "2026-02-04 20:37:23.317818"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 7], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.317818"], ["user_id", 20]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBooking Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bookings"[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>"Alice Johnson", "guest_count"=>"2", "room_type_id"=>"7", "check_in"=>"2026-02-09", "check_out"=>"2026-02-11", "authorize_card"=>"true"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.3ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mBooking Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "4FA8ALL"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", true], ["check_in", "2026-02-09"], ["check_out", "2026-02-11"], ["confirmation", "4FA8ALL"], ["created_at", "2026-02-04 20:37:23.321230"], ["guest_count", 2], ["guest_name", "Alice Johnson"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 7], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.321230"], ["user_id", 20]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBooking Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bookings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.324073"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.324073"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.325028"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 8], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.325028"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.327852"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.327852"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "N1DYDUS"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "N1DYDUS"], ["created_at", "2026-02-04 20:37:23.328565"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 8], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.328565"], ["user_id", 21]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>"Alice Johnson", "guest_count"=>"2", "room_type_id"=>"8", "check_in"=>"2026-02-09", "check_out"=>"2026-02-11", "authorize_card"=>"true"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.3ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "Z7GT1EV"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", true], ["check_in", "2026-02-09"], ["check_out", "2026-02-11"], ["confirmation", "Z7GT1EV"], ["created_at", "2026-02-04 20:37:23.332017"], ["guest_count", 2], ["guest_name", "Alice Johnson"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 8], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.332017"], ["user_id", 21]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.335286"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.335286"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.336488"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 9], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.336488"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.339337"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.339337"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "EZSLWTG"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "EZSLWTG"], ["created_at", "2026-02-04 20:37:23.340212"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 9], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.340212"], ["user_id", 22]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>"Alice Johnson", "guest_count"=>"2", "room_type_id"=>"9", "check_in"=>"2026-02-09", "check_out"=>"2026-02-11", "authorize_card"=>"true"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mBooking Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "0Z1ITPL"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", true], ["check_in", "2026-02-09"], ["check_out", "2026-02-11"], ["confirmation", "0Z1ITPL"], ["created_at", "2026-02-04 20:37:23.343613"], ["guest_count", 2], ["guest_name", "Alice Johnson"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 9], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.343613"], ["user_id", 22]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.346451"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.346451"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.347575"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 10], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.347575"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.350261"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.350261"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "WJ58RVY"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "WJ58RVY"], ["created_at", "2026-02-04 20:37:23.350924"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 10], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.350924"], ["user_id", 23]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
Completed 422 Unprocessable Content in 2ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.355625"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.355625"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.356622"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 11], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.356622"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.359361"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.359361"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "FO7E3Z2"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "FO7E3Z2"], ["created_at", "2026-02-04 20:37:23.360024"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 11], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.360024"], ["user_id", 24]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>"Alice Johnson", "guest_count"=>"2", "room_type_id"=>"11", "check_in"=>"2026-02-09", "check_out"=>"2026-02-04", "authorize_card"=>"true"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 1ms (Views: 0.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.364359"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.364359"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.365446"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 12], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.365446"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.368224"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.368224"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "GAAXJZB"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "GAAXJZB"], ["created_at", "2026-02-04 20:37:23.368902"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 12], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.368902"], ["user_id", 25]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/19" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#update as HTML
  Parameters: {"booking"=>{"guest_count"=>"3"}, "id"=>"19"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mBooking Load (0.1ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 25], ["id", 19], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mBooking Update (0.2ms)[0m  [1m[33mUPDATE "bookings" SET "guest_count" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["guest_count", 3], ["updated_at", "2026-02-04 20:37:23.372361"], ["id", 19]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.375827"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.375827"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.376898"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 13], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.376898"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.379656"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.379656"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "STWJVYD"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "STWJVYD"], ["created_at", "2026-02-04 20:37:23.380463"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 13], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.380463"], ["user_id", 26]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.383779"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.383779"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/20/check_in" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#check_in as HTML
  Parameters: {"id"=>"20"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mBooking Update (0.2ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "Checked In"], ["updated_at", "2026-02-04 20:37:23.387084"], ["id", 20]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (5 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBooking Load (0.1ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.390656"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.390656"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.391801"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 14], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.391801"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.394539"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.394539"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "T2XAEDQ"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "T2XAEDQ"], ["created_at", "2026-02-04 20:37:23.395268"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 14], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.395268"], ["user_id", 28]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/21/check_in" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#check_in as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 28], ["id", 21], ["LIMIT", 1]]
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.400325"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.400325"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.401427"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 15], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.401427"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.404137"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.404137"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "0MBURS6"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "0MBURS6"], ["created_at", "2026-02-04 20:37:23.404910"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 15], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.404910"], ["user_id", 29]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Update (0.3ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "Checked In"], ["updated_at", "2026-02-04 20:37:23.406178"], ["id", 22]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.409125"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.409125"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/22/check_out" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#check_out as HTML
  Parameters: {"id"=>"22"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mBooking Load (0.1ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mBooking Update (0.2ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "Departing"], ["updated_at", "2026-02-04 20:37:23.411868"], ["id", 22]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (5 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.415377"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.415377"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.416830"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 16], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.416830"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.419715"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.419715"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "4LHPACM"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "4LHPACM"], ["created_at", "2026-02-04 20:37:23.420552"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 16], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.420552"], ["user_id", 31]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Update (0.5ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "Checked In"], ["updated_at", "2026-02-04 20:37:23.421891"], ["id", 23]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/23/check_out" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#check_out as HTML
  Parameters: {"id"=>"23"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 31], ["id", 23], ["LIMIT", 1]]
Completed 403 Forbidden in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.427406"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.427406"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.428564"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 17], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.428564"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.431655"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.431655"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "ICCZI2Y"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "ICCZI2Y"], ["created_at", "2026-02-04 20:37:23.432606"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 17], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.432606"], ["user_id", 32]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.436367"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.436367"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/24/assign_room" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#assign_room as HTML
  Parameters: {"room_id"=>"17", "id"=>"24"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."room_id" = $1 AND ((check_in <= $2 AND check_out >= $3) OR (check_in <= $4 AND check_out >= $5)) AND "bookings"."status" != $6 LIMIT $7[0m  [["room_id", 17], [nil, "2026-02-07"], [nil, "2026-02-05"], [nil, "2026-02-05"], [nil, "2026-02-07"], ["status", "cancelled"], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mBooking Update (0.2ms)[0m  [1m[33mUPDATE "bookings" SET "room_id" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["room_id", 17], ["updated_at", "2026-02-04 20:37:23.441339"], ["id", 24]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.5ms (7 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBooking Load (0.1ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.444634"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.444634"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.445647"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 18], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.445647"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.448731"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.448731"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "IYPEQQX"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "IYPEQQX"], ["created_at", "2026-02-04 20:37:23.449815"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 18], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.449815"], ["user_id", 34]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/25/assign_room" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#assign_room as HTML
  Parameters: {"room_id"=>"18", "id"=>"25"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mBooking Load (0.1ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 34], ["id", 25], ["LIMIT", 1]]
Completed 403 Forbidden in 1ms (Views: 0.0ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.453797"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.453797"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.454769"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 19], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.454769"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.457622"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.457622"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "DDMLLIJ"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "DDMLLIJ"], ["created_at", "2026-02-04 20:37:23.458326"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 19], ["status", "confirmed"], ["updated_at", "2026-02-04 20:37:23.458326"], ["user_id", 35]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/bookings/26" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::BookingsController#destroy as HTML
  Parameters: {"id"=>"26"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 35], ["id", 26], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mBooking Update (0.2ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "cancelled"], ["updated_at", "2026-02-04 20:37:23.462002"], ["id", 26]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 2ms (ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBooking Load (0.1ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.464550"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.464550"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.467316"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.467316"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types"[0m
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.471041"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.471041"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.473797"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.473797"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.476564"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.476564"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/room_types/22" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#show as HTML
  Parameters: {"id"=>"22"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.480458"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.480458"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoomType Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "room_types"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.483275"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.483275"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#create as HTML
  Parameters: {"room_type"=>{"name"=>"Executive Suite", "price"=>"250.0", "max_guests"=>"3", "description"=>"Luxury suite"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Executive Suite"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.485447"], ["description", "Luxury suite"], ["image", nil], ["max_guests", 3], ["name", "Executive Suite"], ["price", "250.0"], ["updated_at", "2026-02-04 20:37:23.485447"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoomType Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "room_types"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.487714"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.487714"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.490667"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.490667"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#create as HTML
  Parameters: {"room_type"=>{"name"=>""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", ""], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.497590"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.497590"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.500353"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.500353"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#create as HTML
  Parameters: {"room_type"=>{"name"=>"Executive Suite", "price"=>"250.0", "max_guests"=>"3", "description"=>"Luxury suite"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.503283"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.503283"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.506072"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.506072"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/room_types/27" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#update as HTML
  Parameters: {"room_type"=>{"price"=>"150.0"}, "id"=>"27"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Update (0.1ms)[0m  [1m[33mUPDATE "room_types" SET "price" = $1, "updated_at" = $2 WHERE "room_types"."id" = $3[0m  [["price", "150.0"], ["updated_at", "2026-02-04 20:37:23.510089"], ["id", 27]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 2.1ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.512641"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.512641"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.515274"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.515274"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/room_types/28" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#update as HTML
  Parameters: {"room_type"=>{"price"=>"150.0"}, "id"=>"28"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.518041"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.518041"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoomType Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "room_types"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.520964"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.520964"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/room_types/29" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#destroy as HTML
  Parameters: {"id"=>"29"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."room_type_id" = $1[0m  [["room_type_id", 29]]
  [1m[36mBooking Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."room_type_id" = $1 LIMIT $2[0m  [["room_type_id", 29], ["LIMIT", 1]]
  [1m[36mRoomType Destroy (0.2ms)[0m  [1m[31mDELETE FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 29]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 3ms (ActiveRecord: 0.9ms (5 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoomType Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "room_types"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.526406"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.526406"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.529260"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.529260"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/room_types/30" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomTypesController#destroy as HTML
  Parameters: {"id"=>"30"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.532511"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.532511"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.533634"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 31], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.533634"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.536434"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.536434"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms"[0m
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 31]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.540801"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.540801"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.541903"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 32], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.541903"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Suite"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.542982"], ["description", nil], ["image", nil], ["max_guests", 3], ["name", "Suite"], ["price", "200.0"], ["updated_at", "2026-02-04 20:37:23.542982"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "201"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "King"], ["created_at", "2026-02-04 20:37:23.544045"], ["description", nil], ["floor_no", 2], ["images", "[]"], ["price_per_night", "200.0"], ["room_no", "201"], ["room_type_id", 33], ["size", 40], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.544045"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.546734"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.546734"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms?room_type_id=32" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#index as HTML
  Parameters: {"room_type_id"=>"32"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."room_type_id" = $1[0m  [["room_type_id", 32]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 32]]
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.550585"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.550585"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.551606"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 34], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.551606"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "102"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.552774"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "102"], ["room_type_id", 34], ["size", 25], ["status", "booked"], ["updated_at", "2026-02-04 20:37:23.552774"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.555434"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.555434"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms?status=available" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#index as HTML
  Parameters: {"status"=>"available"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."status" = $1[0m  [["status", "available"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 34]]
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.559215"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.559215"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.560295"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 35], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.560295"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "202"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.561363"], ["description", nil], ["floor_no", 2], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "202"], ["room_type_id", 35], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.561363"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.563998"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.563998"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms?search=101" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#index as HTML
  Parameters: {"search"=>"101"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE (room_no ILIKE $1)[0m  [[nil, "%101%"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 35]]
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.567995"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.567995"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.569109"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 36], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.569109"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "102"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:37:23.570154"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "102"], ["room_type_id", 36], ["size", 25], ["status", "booked"], ["updated_at", "2026-02-04 20:37:23.570154"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.572809"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.572809"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms/available" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#available as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."status" = $1[0m  [["status", "available"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.577174"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.577174"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.578380"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 37], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.578380"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Suite"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.579468"], ["description", nil], ["image", nil], ["max_guests", 3], ["name", "Suite"], ["price", "200.0"], ["updated_at", "2026-02-04 20:37:23.579468"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "201"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "King"], ["created_at", "2026-02-04 20:37:23.580437"], ["description", nil], ["floor_no", 2], ["images", "[]"], ["price_per_night", "200.0"], ["room_no", "201"], ["room_type_id", 38], ["size", 40], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.580437"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.583127"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.583127"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms/available?room_type_id=37" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#available as HTML
  Parameters: {"room_type_id"=>"37"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."status" = $1 AND "rooms"."room_type_id" = $2[0m  [["status", "available"], ["room_type_id", 37]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.587165"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.587165"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.588171"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 39], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.588171"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.591108"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.591108"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms/31" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#show as HTML
  Parameters: {"id"=>"31"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.595614"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.595614"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.596711"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 40], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.596711"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoom Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rooms"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.599678"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.599678"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/rooms" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#create as HTML
  Parameters: {"room"=>{"room_no"=>"301", "room_type_id"=>"40", "bed_type"=>"King Bed", "size"=>"30", "floor_no"=>"3", "price_per_night"=>"150.0", "status"=>"available", "amenities"=>["Wi-Fi"], "images"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mRoom Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "301"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\"]"], ["bed_type", "King Bed"], ["created_at", "2026-02-04 20:37:23.602521"], ["description", nil], ["floor_no", 3], ["images", "[\"\"]"], ["price_per_night", "150.0"], ["room_no", "301"], ["room_type_id", 40], ["size", 30], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.602521"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoom Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rooms"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.605131"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.605131"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.606343"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 41], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.606343"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.609137"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.609137"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/rooms" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#create as HTML
  Parameters: {"room"=>{"room_no"=>""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", ""], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 2ms (Views: 0.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.614013"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.614013"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.614994"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 42], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.614994"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.617732"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.617732"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/rooms" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#create as HTML
  Parameters: {"room"=>{"room_no"=>"301", "room_type_id"=>"42", "bed_type"=>"King Bed", "size"=>"30", "floor_no"=>"3", "price_per_night"=>"150.0", "status"=>"available", "amenities"=>["Wi-Fi"], "images"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.621004"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.621004"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.622059"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 43], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.622059"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.624908"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.624908"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/rooms/36" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#update as HTML
  Parameters: {"room"=>{"status"=>"maintenance"}, "id"=>"36"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Update (0.1ms)[0m  [1m[33mUPDATE "rooms" SET "status" = $1, "updated_at" = $2 WHERE "rooms"."id" = $3[0m  [["status", "maintenance"], ["updated_at", "2026-02-04 20:37:23.627915"], ["id", 36]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.0ms | ActiveRecord: 1.3ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.631008"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.631008"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.632036"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 44], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.632036"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.634824"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.634824"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/rooms/37" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#update as HTML
  Parameters: {"room"=>{"status"=>"maintenance"}, "id"=>"37"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.637706"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.637706"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.638756"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 45], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.638756"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoom Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rooms"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.641848"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:37:23.641848"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/rooms/38" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#destroy as HTML
  Parameters: {"id"=>"38"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."room_id" = $1 LIMIT $2[0m  [["room_id", 38], ["LIMIT", 1]]
  [1m[36mRoom Destroy (0.2ms)[0m  [1m[31mDELETE FROM "rooms" WHERE "rooms"."id" = $1[0m  [["id", 38]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 2ms (ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoom Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rooms"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.646618"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:37:23.646618"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:37:23.647629"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 46], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:37:23.647629"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:37:23.650337"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:37:23.650337"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/rooms/39" for 127.0.0.1 at 2026-02-04 23:37:23 +0300
Processing by Api::V1::RoomsController#destroy as HTML
  Parameters: {"id"=>"39"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.607847"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.607847"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 22ms (Views: 0.1ms | ActiveRecord: 7.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.617028"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.617028"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.0ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 219ms (Views: 0.1ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 85.1ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 4ms (Views: 0.0ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.848597"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.848597"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
Started POST "/api/v1/auth/register" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#register as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "name"=>"Test User", "role"=>"guest"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.864035"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.864035"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#login as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.871405"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.871405"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#login as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.879230"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.879230"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#login as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.884353"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.884353"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/auth/login" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#login as HTML
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.890700"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.890700"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#me as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.896336"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.896336"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#me as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.900864"], ["email", "[FILTERED]"], ["name", "Test User"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.900864"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/auth/me" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::AuthController#me as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.3ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.909310"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:29.909310"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.6ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:29.919454"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 47], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:29.919454"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.922864"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.922864"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "VR0SLOT"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.7ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "VR0SLOT"], ["created_at", "2026-02-04 20:43:29.929356"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 47], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:29.929356"], ["user_id", 69]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "OMU7PKR"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.4ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-04"], ["check_out", "2026-02-05"], ["confirmation", "OMU7PKR"], ["created_at", "2026-02-04 20:43:29.932756"], ["guest_count", 1], ["guest_name", "Jane"], ["price", "132.0"], ["room_id", nil], ["room_type_id", 47], ["status", "Checked In"], ["updated_at", "2026-02-04 20:43:29.932756"], ["user_id", 69]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings?status=confirmed" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::BookingsController#index as HTML
  Parameters: {"status"=>"confirmed"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  [1m[36mBooking Load (0.4ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."status" = $2[0m  [["user_id", 69], ["status", "confirmed"]]
  [1m[36mRoomType Load (0.3ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 47]]
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 6.6ms (3 queries, 0 cached) | GC: 6.3ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.951555"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:29.951555"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:29.952865"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 48], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:29.952865"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.955771"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.955771"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "YLPFTYZ"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "YLPFTYZ"], ["created_at", "2026-02-04 20:43:29.956558"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 48], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:29.956558"], ["user_id", 70]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "1VTKXPP"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-04"], ["check_out", "2026-02-05"], ["confirmation", "1VTKXPP"], ["created_at", "2026-02-04 20:43:29.957983"], ["guest_count", 1], ["guest_name", "Jane Smith"], ["price", "132.0"], ["room_id", nil], ["room_type_id", 48], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:29.957983"], ["user_id", 70]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings?search=John" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::BookingsController#index as HTML
  Parameters: {"search"=>"John"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND (guest_name ILIKE $2 OR confirmation ILIKE $3)[0m  [["user_id", 70], [nil, "%John%"], [nil, "%John%"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 48]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.964325"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:29.964325"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:29.965646"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 49], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:29.965646"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.968707"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.968707"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "Q5VOWE1"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "Q5VOWE1"], ["created_at", "2026-02-04 20:43:29.969528"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 49], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:29.969528"], ["user_id", 71]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings?search=Q5VOWE1" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::BookingsController#index as HTML
  Parameters: {"search"=>"Q5VOWE1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND (guest_name ILIKE $2 OR confirmation ILIKE $3)[0m  [["user_id", 71], [nil, "%Q5VOWE1%"], [nil, "%Q5VOWE1%"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 49]]
Completed 200 OK in 2ms (Views: 0.0ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.974643"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:29.974643"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:29.975934"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 50], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:29.975934"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.978705"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.978705"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "OGYLLHS"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "OGYLLHS"], ["created_at", "2026-02-04 20:43:29.979464"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 50], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:29.979464"], ["user_id", 72]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.983119"], ["email", "[FILTERED]"], ["name", "Other"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.983119"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "MK035DP"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-04"], ["check_out", "2026-02-05"], ["confirmation", "MK035DP"], ["created_at", "2026-02-04 20:43:29.983913"], ["guest_count", 1], ["guest_name", "Jane"], ["price", "132.0"], ["room_id", nil], ["room_type_id", 50], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:29.983913"], ["user_id", 73]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:43:29 +0300
Processing by Api::V1::BookingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
  [1m[36mBooking Load (0.3ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1[0m  [["user_id", 72]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 50]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.989604"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:29.989604"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:29.990842"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 51], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:29.990842"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.993794"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.993794"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "H49R0JO"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "H49R0JO"], ["created_at", "2026-02-04 20:43:29.994475"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 51], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:29.994475"], ["user_id", 74]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:29.997769"], ["email", "[FILTERED]"], ["name", "Other"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:29.997769"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "XCDMQST"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.4ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-04"], ["check_out", "2026-02-05"], ["confirmation", "XCDMQST"], ["created_at", "2026-02-04 20:43:29.998527"], ["guest_count", 1], ["guest_name", "Jane"], ["price", "132.0"], ["room_id", nil], ["room_type_id", 51], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:29.998527"], ["user_id", 75]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.001886"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.001886"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN ($1, $2)[0m  [["id", 74], ["id", 75]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 51]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.007461"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.007461"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.008795"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 52], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.008795"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.011521"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.011521"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "6DVHZZG"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "6DVHZZG"], ["created_at", "2026-02-04 20:43:30.012257"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 52], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.012257"], ["user_id", 77]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/bookings/36" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#show as HTML
  Parameters: {"id"=>"36"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[36mBooking Load (0.3ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 77], ["id", 36], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.017872"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.017872"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.019047"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 53], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.019047"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.021960"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.021960"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "XDBJFMR"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.1ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "XDBJFMR"], ["created_at", "2026-02-04 20:43:30.022745"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 53], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.022745"], ["user_id", 78]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mBooking Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bookings"[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>"Alice Johnson", "guest_count"=>"2", "room_type_id"=>"53", "check_in"=>"2026-02-09", "check_out"=>"2026-02-11", "authorize_card"=>"true"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mBooking Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "BM1UC73"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", true], ["check_in", "2026-02-09"], ["check_out", "2026-02-11"], ["confirmation", "BM1UC73"], ["created_at", "2026-02-04 20:43:30.026601"], ["guest_count", 2], ["guest_name", "Alice Johnson"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 53], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.026601"], ["user_id", 78]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBooking Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "bookings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.030015"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.030015"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.031284"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 54], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.031284"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.034283"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.034283"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "VPLDWQM"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "VPLDWQM"], ["created_at", "2026-02-04 20:43:30.034956"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 54], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.034956"], ["user_id", 79]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>"Alice Johnson", "guest_count"=>"2", "room_type_id"=>"54", "check_in"=>"2026-02-09", "check_out"=>"2026-02-11", "authorize_card"=>"true"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 79], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.3ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "DCKCQAI"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", true], ["check_in", "2026-02-09"], ["check_out", "2026-02-11"], ["confirmation", "DCKCQAI"], ["created_at", "2026-02-04 20:43:30.038093"], ["guest_count", 2], ["guest_name", "Alice Johnson"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 54], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.038093"], ["user_id", 79]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.040811"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.040811"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.041847"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 55], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.041847"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.044850"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.044850"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "JRUQOP5"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.2ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "JRUQOP5"], ["created_at", "2026-02-04 20:43:30.045683"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 55], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.045683"], ["user_id", 80]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>"Alice Johnson", "guest_count"=>"2", "room_type_id"=>"55", "check_in"=>"2026-02-09", "check_out"=>"2026-02-11", "authorize_card"=>"true"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.3ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "BHQV1SZ"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", true], ["check_in", "2026-02-09"], ["check_out", "2026-02-11"], ["confirmation", "BHQV1SZ"], ["created_at", "2026-02-04 20:43:30.049026"], ["guest_count", 2], ["guest_name", "Alice Johnson"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 55], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.049026"], ["user_id", 80]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.1ms | ActiveRecord: 1.0ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.057468"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.057468"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.058582"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 56], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.058582"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.061569"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.061569"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "ZN9B3QA"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "ZN9B3QA"], ["created_at", "2026-02-04 20:43:30.062320"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 56], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.062320"], ["user_id", 81]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
Completed 422 Unprocessable Content in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.067679"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.067679"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.068862"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 57], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.068862"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.071857"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.071857"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "FJYDFXC"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.1ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "FJYDFXC"], ["created_at", "2026-02-04 20:43:30.072638"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 57], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.072638"], ["user_id", 82]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/bookings" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#create as HTML
  Parameters: {"booking"=>{"guest_name"=>"Alice Johnson", "guest_count"=>"2", "room_type_id"=>"57", "check_in"=>"2026-02-09", "check_out"=>"2026-02-04", "authorize_card"=>"true"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.3ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.077925"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.077925"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.079306"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 58], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.079306"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.082125"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.082125"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "N1N5TMR"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.1ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "N1N5TMR"], ["created_at", "2026-02-04 20:43:30.082945"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 58], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.082945"], ["user_id", 83]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/45" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#update as HTML
  Parameters: {"booking"=>{"guest_count"=>"3"}, "id"=>"45"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 83], ["id", 45], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.3ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  [1m[36mBooking Update (0.2ms)[0m  [1m[33mUPDATE "bookings" SET "guest_count" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["guest_count", 3], ["updated_at", "2026-02-04 20:43:30.086421"], ["id", 45]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.0ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.2ms)
  [1m[36mBooking Load (0.3ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.089813"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.089813"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.090914"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 59], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.090914"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.094107"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.094107"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "Z5BL5B7"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.1ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "Z5BL5B7"], ["created_at", "2026-02-04 20:43:30.094821"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 59], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.094821"], ["user_id", 84]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.098019"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.098019"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/46/check_in" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#check_in as HTML
  Parameters: {"id"=>"46"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  [1m[36mBooking Update (0.3ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "Checked In"], ["updated_at", "2026-02-04 20:43:30.101196"], ["id", 46]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms (5 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.105271"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.105271"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.106501"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 60], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.106501"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.109404"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.109404"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "AWWRILG"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "AWWRILG"], ["created_at", "2026-02-04 20:43:30.110239"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 60], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.110239"], ["user_id", 86]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/47/check_in" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#check_in as HTML
  Parameters: {"id"=>"47"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 86], ["id", 47], ["LIMIT", 1]]
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.114787"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.114787"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.116003"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 61], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.116003"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.118966"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.118966"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "DSNJCRT"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.1ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "DSNJCRT"], ["created_at", "2026-02-04 20:43:30.119726"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 61], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.119726"], ["user_id", 87]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Update (0.3ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "Checked In"], ["updated_at", "2026-02-04 20:43:30.120945"], ["id", 48]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.123911"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.123911"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/48/check_out" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#check_out as HTML
  Parameters: {"id"=>"48"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mBooking Update (0.2ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "Departing"], ["updated_at", "2026-02-04 20:43:30.126612"], ["id", 48]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms (5 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.129499"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.129499"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.130703"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 62], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.130703"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.133667"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.133667"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "H4OOV3P"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "H4OOV3P"], ["created_at", "2026-02-04 20:43:30.134458"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 62], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.134458"], ["user_id", 89]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Update (0.4ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "Checked In"], ["updated_at", "2026-02-04 20:43:30.135864"], ["id", 49]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/49/check_out" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#check_out as HTML
  Parameters: {"id"=>"49"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 89], ["id", 49], ["LIMIT", 1]]
Completed 403 Forbidden in 1ms (Views: 0.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.139855"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.139855"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.140965"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 63], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.140965"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.143970"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.143970"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "XUSRILZ"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "XUSRILZ"], ["created_at", "2026-02-04 20:43:30.144787"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 63], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.144787"], ["user_id", 90]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.148208"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.148208"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/50/assign_room" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#assign_room as HTML
  Parameters: {"room_id"=>"56", "id"=>"50"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."room_id" = $1 AND ((check_in <= $2 AND check_out >= $3) OR (check_in <= $4 AND check_out >= $5)) AND "bookings"."status" != $6 LIMIT $7[0m  [["room_id", 56], [nil, "2026-02-07"], [nil, "2026-02-05"], [nil, "2026-02-05"], [nil, "2026-02-07"], ["status", "cancelled"], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  [1m[36mBooking Update (0.4ms)[0m  [1m[33mUPDATE "bookings" SET "room_id" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["room_id", 56], ["updated_at", "2026-02-04 20:43:30.152868"], ["id", 50]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.1ms (7 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.162530"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.162530"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.163737"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 64], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.163737"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.166771"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.166771"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "3Q5TYKW"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "3Q5TYKW"], ["created_at", "2026-02-04 20:43:30.167608"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 64], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.167608"], ["user_id", 92]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/bookings/51/assign_room" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#assign_room as HTML
  Parameters: {"room_id"=>"57", "id"=>"51"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 92], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 92], ["id", 51], ["LIMIT", 1]]
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.172693"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.172693"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.1ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.173799"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 65], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.173799"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.176553"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.176553"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."confirmation" = $1 LIMIT $2[0m  [["confirmation", "PUOUVDN"], ["LIMIT", 1]]
  [1m[36mBooking Create (0.3ms)[0m  [1m[32mINSERT INTO "bookings" ("authorize_card", "check_in", "check_out", "confirmation", "created_at", "guest_count", "guest_name", "price", "room_id", "room_type_id", "status", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authorize_card", false], ["check_in", "2026-02-05"], ["check_out", "2026-02-07"], ["confirmation", "PUOUVDN"], ["created_at", "2026-02-04 20:43:30.177307"], ["guest_count", 2], ["guest_name", "John Doe"], ["price", "264.0"], ["room_id", nil], ["room_type_id", 65], ["status", "confirmed"], ["updated_at", "2026-02-04 20:43:30.177307"], ["user_id", 93]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/bookings/52" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::BookingsController#destroy as HTML
  Parameters: {"id"=>"52"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  [1m[36mBooking Load (0.2ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."user_id" = $1 AND "bookings"."id" = $2 LIMIT $3[0m  [["user_id", 93], ["id", 52], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  [1m[36mBooking Update (0.3ms)[0m  [1m[33mUPDATE "bookings" SET "status" = $1, "updated_at" = $2 WHERE "bookings"."id" = $3[0m  [["status", "cancelled"], ["updated_at", "2026-02-04 20:43:30.181038"], ["id", 52]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 2ms (ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mBooking Load (0.1ms)[0m  [1m[34mSELECT "bookings".* FROM "bookings" WHERE "bookings"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.184119"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.184119"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.187021"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.187021"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 94], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types"[0m
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.190838"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.190838"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.194009"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.194009"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.196825"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.196825"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/room_types/68" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#show as HTML
  Parameters: {"id"=>"68"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 95], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.200758"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.200758"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoomType Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "room_types"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.203904"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.203904"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#create as HTML
  Parameters: {"room_type"=>{"name"=>"Executive Suite", "price"=>"250.0", "max_guests"=>"3", "description"=>"Luxury suite"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 96], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Executive Suite"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.206143"], ["description", "Luxury suite"], ["image", nil], ["max_guests", 3], ["name", "Executive Suite"], ["price", "250.0"], ["updated_at", "2026-02-04 20:43:30.206143"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoomType Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "room_types"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.208356"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.208356"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.211231"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.211231"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#create as HTML
  Parameters: {"room_type"=>{"name"=>""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 97], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", ""], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 2ms (Views: 0.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.216001"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.216001"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.218800"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.218800"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/room_types" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#create as HTML
  Parameters: {"room_type"=>{"name"=>"Executive Suite", "price"=>"250.0", "max_guests"=>"3", "description"=>"Luxury suite"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 98], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.221710"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.221710"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.224423"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.224423"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/room_types/73" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#update as HTML
  Parameters: {"room_type"=>{"price"=>"150.0"}, "id"=>"73"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Update (0.2ms)[0m  [1m[33mUPDATE "room_types" SET "price" = $1, "updated_at" = $2 WHERE "room_types"."id" = $3[0m  [["price", "150.0"], ["updated_at", "2026-02-04 20:43:30.229433"], ["id", 73]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 3.0ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.3ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.232559"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.232559"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.235555"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.235555"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/room_types/74" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#update as HTML
  Parameters: {"room_type"=>{"price"=>"150.0"}, "id"=>"74"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.238561"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.238561"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoomType Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "room_types"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.241639"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.241639"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/room_types/75" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#destroy as HTML
  Parameters: {"id"=>"75"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Load (0.4ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."room_type_id" = $1[0m  [["room_type_id", 75]]
  [1m[36mBooking Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."room_type_id" = $1 LIMIT $2[0m  [["room_type_id", 75], ["LIMIT", 1]]
  [1m[36mRoomType Destroy (0.6ms)[0m  [1m[31mDELETE FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 75]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 3ms (ActiveRecord: 1.4ms (5 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoomType Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "room_types"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.247985"], ["description", "A comfortable deluxe room"], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.247985"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.250822"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.250822"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/room_types/76" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomTypesController#destroy as HTML
  Parameters: {"id"=>"76"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 102], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.253753"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.253753"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.255007"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 77], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.255007"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.257967"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.257967"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms"[0m
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 77]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.267134"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.267134"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.268884"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 78], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.268884"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Suite"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.270144"], ["description", nil], ["image", nil], ["max_guests", 3], ["name", "Suite"], ["price", "200.0"], ["updated_at", "2026-02-04 20:43:30.270144"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "201"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "King"], ["created_at", "2026-02-04 20:43:30.271286"], ["description", nil], ["floor_no", 2], ["images", "[]"], ["price_per_night", "200.0"], ["room_no", "201"], ["room_type_id", 79], ["size", 40], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.271286"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.274153"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.274153"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms?room_type_id=78" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#index as HTML
  Parameters: {"room_type_id"=>"78"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."room_type_id" = $1[0m  [["room_type_id", 78]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 78]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.278695"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.278695"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.279936"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 80], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.279936"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "102"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.281149"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "102"], ["room_type_id", 80], ["size", 25], ["status", "booked"], ["updated_at", "2026-02-04 20:43:30.281149"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.283996"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.283996"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms?status=available" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#index as HTML
  Parameters: {"status"=>"available"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 105], ["LIMIT", 1]]
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."status" = $1[0m  [["status", "available"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 80]]
Completed 200 OK in 2ms (Views: 0.0ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.288145"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.288145"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.289325"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 81], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.289325"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "202"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.290502"], ["description", nil], ["floor_no", 2], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "202"], ["room_type_id", 81], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.290502"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.293343"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.293343"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms?search=101" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#index as HTML
  Parameters: {"search"=>"101"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE (room_no ILIKE $1)[0m  [[nil, "%101%"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1[0m  [["id", 81]]
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.297597"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.297597"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.4ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.298764"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 82], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.298764"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "102"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "Queen"], ["created_at", "2026-02-04 20:43:30.300140"], ["description", nil], ["floor_no", 1], ["images", "[]"], ["price_per_night", "120.0"], ["room_no", "102"], ["room_type_id", 82], ["size", 25], ["status", "booked"], ["updated_at", "2026-02-04 20:43:30.300140"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.303115"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.303115"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms/available" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#available as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 107], ["LIMIT", 1]]
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."status" = $1[0m  [["status", "available"]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.0ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.307188"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.307188"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.308461"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 83], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.308461"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Suite"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.1ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.309661"], ["description", nil], ["image", nil], ["max_guests", 3], ["name", "Suite"], ["price", "200.0"], ["updated_at", "2026-02-04 20:43:30.309661"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "201"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[]"], ["bed_type", "King"], ["created_at", "2026-02-04 20:43:30.310625"], ["description", nil], ["floor_no", 2], ["images", "[]"], ["price_per_night", "200.0"], ["room_no", "201"], ["room_type_id", 84], ["size", 40], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.310625"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.313393"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.313393"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms/available?room_type_id=83" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#available as HTML
  Parameters: {"room_type_id"=>"83"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."status" = $1 AND "rooms"."room_type_id" = $2[0m  [["status", "available"], ["room_type_id", 83]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.0ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.318009"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.318009"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.319202"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 85], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.319202"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.322051"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.322051"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/api/v1/rooms/70" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#show as HTML
  Parameters: {"id"=>"70"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.326290"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.326290"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.327467"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 86], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.327467"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoom Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rooms"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.330623"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.330623"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/rooms" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#create as HTML
  Parameters: {"room"=>{"room_no"=>"301", "room_type_id"=>"86", "bed_type"=>"King Bed", "size"=>"30", "floor_no"=>"3", "price_per_night"=>"150.0", "status"=>"available", "amenities"=>["Wi-Fi"], "images"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 110], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.2ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "301"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\"]"], ["bed_type", "King Bed"], ["created_at", "2026-02-04 20:43:30.333603"], ["description", nil], ["floor_no", 3], ["images", "[\"\"]"], ["price_per_night", "150.0"], ["room_no", "301"], ["room_type_id", 86], ["size", 30], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.333603"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.1ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoom Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rooms"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.336356"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.336356"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.337526"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 87], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.337526"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.340364"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.340364"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/rooms" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#create as HTML
  Parameters: {"room"=>{"room_no"=>""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 111], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", ""], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.345989"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.345989"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.347286"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 88], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.347286"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.350211"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.350211"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/api/v1/rooms" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#create as HTML
  Parameters: {"room"=>{"room_no"=>"301", "room_type_id"=>"88", "bed_type"=>"King Bed", "size"=>"30", "floor_no"=>"3", "price_per_night"=>"150.0", "status"=>"available", "amenities"=>["Wi-Fi"], "images"=>[""]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 112], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.357035"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.357035"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.358257"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 89], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.358257"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.361187"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.361187"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/rooms/75" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#update as HTML
  Parameters: {"room"=>{"status"=>"maintenance"}, "id"=>"75"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 113], ["LIMIT", 1]]
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Update (0.3ms)[0m  [1m[33mUPDATE "rooms" SET "status" = $1, "updated_at" = $2 WHERE "rooms"."id" = $3[0m  [["status", "maintenance"], ["updated_at", "2026-02-04 20:43:30.365840"], ["id", 75]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoomType Load (0.1ms)[0m  [1m[34mSELECT "room_types".* FROM "room_types" WHERE "room_types"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.8ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.369652"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.369652"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.3ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.371049"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 90], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.371049"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.373955"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.373955"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/api/v1/rooms/76" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#update as HTML
  Parameters: {"room"=>{"status"=>"maintenance"}, "id"=>"76"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 114], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.377395"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.377395"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.378675"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 91], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.378675"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mRoom Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "rooms"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.382000"], ["email", "[FILTERED]"], ["name", "Staff"], ["password_digest", "[FILTERED]"], ["role", "staff"], ["updated_at", "2026-02-04 20:43:30.382000"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/rooms/77" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#destroy as HTML
  Parameters: {"id"=>"77"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 115], ["LIMIT", 1]]
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mBooking Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "bookings" WHERE "bookings"."room_id" = $1 LIMIT $2[0m  [["room_id", 77], ["LIMIT", 1]]
  [1m[36mRoom Destroy (0.4ms)[0m  [1m[31mDELETE FROM "rooms" WHERE "rooms"."id" = $1[0m  [["id", 77]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 204 No Content in 2ms (ActiveRecord: 1.1ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mRoom Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "rooms"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoomType Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "room_types" WHERE "room_types"."name" = $1 LIMIT $2[0m  [["name", "Deluxe Room"], ["LIMIT", 1]]
  [1m[36mRoomType Create (0.2ms)[0m  [1m[32mINSERT INTO "room_types" ("created_at", "description", "image", "max_guests", "name", "price", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.387395"], ["description", nil], ["image", nil], ["max_guests", 2], ["name", "Deluxe Room"], ["price", "120.0"], ["updated_at", "2026-02-04 20:43:30.387395"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mRoom Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "rooms" WHERE "rooms"."room_no" = $1 LIMIT $2[0m  [["room_no", "101"], ["LIMIT", 1]]
  [1m[36mRoom Create (0.2ms)[0m  [1m[32mINSERT INTO "rooms" ("amenities", "bed_type", "created_at", "description", "floor_no", "images", "price_per_night", "room_no", "room_type_id", "size", "status", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["amenities", "[\"Wi-Fi\",\"A/C\"]"], ["bed_type", "Queen Bed"], ["created_at", "2026-02-04 20:43:30.388546"], ["description", nil], ["floor_no", 1], ["images", "[\"image1.jpg\"]"], ["price_per_night", "120.0"], ["room_no", "101"], ["room_type_id", 92], ["size", 25], ["status", "available"], ["updated_at", "2026-02-04 20:43:30.388546"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "email", "name", "password_digest", "role", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", "2026-02-04 20:43:30.391372"], ["email", "[FILTERED]"], ["name", "Guest"], ["password_digest", "[FILTERED]"], ["role", "guest"], ["updated_at", "2026-02-04 20:43:30.391372"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/api/v1/rooms/78" for 127.0.0.1 at 2026-02-04 23:43:30 +0300
Processing by Api::V1::RoomsController#destroy as HTML
  Parameters: {"id"=>"78"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 116], ["LIMIT", 1]]
Filter chain halted as :require_staff rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
